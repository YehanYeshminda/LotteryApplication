"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[254],{6254:(D,v,o)=>{o.r(v),o.d(v,{UserPackagesModule:()=>w});var g=o(6895),l=o(1779),e=o(4650),h=o(1239),U=o(1229);let y=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-packages"]],decls:4,vars:0,consts:[[1,""]],template:function(a,r){1&a&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0),e._UZ(2,"router-outlet"),e.qZA(),e._UZ(3,"app-footer"))},dependencies:[l.lC,h.S,U.c]}),t})();var C=o(7618),u=o(9646),n=o(9653);const P=(0,n.ZF)("userPackages"),S=(0,n.P1)(P,t=>t.isLoaded),Z=(0,n.P1)(P,t=>t.userPackages);var p=o(7708),d=o(868),f=o(5657),A=o(9378);function F(t,s){if(1&t){const a=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"h6"),e._uU(5),e.qZA(),e.TgZ(6,"h2"),e._uU(7),e.qZA(),e.TgZ(8,"p",13),e._uU(9),e.qZA()(),e.TgZ(10,"div",14)(11,"a",15),e.NdJ("click",function(){const i=e.CHM(a).$implicit,m=e.oxw(2);return e.KtG(m.buyNewPackage(i.id.toString(),i.packgeUniqueId,i.packageName))}),e.TgZ(12,"span"),e._uU(13,"Purchase Now"),e.qZA()()()()()()}if(2&t){const a=s.$implicit;e.xp6(5),e.Oqu(a.packageName),e.xp6(2),e.Oqu(a.packagePrice),e.xp6(2),e.Oqu(a.packgeUniqueId)}}function H(t,s){if(1&t&&(e.ynx(0),e.YNc(1,F,14,3,"div",8),e.BQk()),2&t){const a=s.ngIf;e.xp6(1),e.Q6J("ngForOf",a)}}function x(t,s){1&t&&(e.TgZ(0,"div")(1,"h1"),e._uU(2,"Loading..."),e.qZA()())}let T=(()=>{class t{constructor(a,r,c){this.store=a,this.cookieService=r,this.cartEntityService=c,this.userPackages$=(0,u.of)([])}ngOnInit(){this.userPackages$=this.store.select(Z)}buyNewPackage(a,r,c){(0,d.ke)(`Are you sure you want to buy the package ${c}?`).then(i=>{if(i.isConfirmed)if(null!=(0,p.l)(this.cookieService.get("user"))){const m={cartNumbers:[],paid:0,name:c,addOn:(new Date).toISOString(),authDto:(0,p.l)(this.cookieService.get("user")),price:0,raffleId:r,lotteryStatus:1,raffleNo:r,userId:0};this.cartEntityService.add(m).subscribe({next:j=>{(0,d.GO)("Successfully added to the cart!")}})}else(0,d.A)("Please login to add to cart")})}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(n.yh),e.Y36(f.N),e.Y36(A.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-package-home"]],decls:12,vars:4,consts:[[1,"pricing-section","padding-top","padding-bottom"],[1,"container","mt-5"],[1,"section-header"],[1,"section-wrapper","mt-4"],[1,"pricing-plan-wrapper"],[1,"row","g-4","justify-content-center"],[4,"ngIf","ngIfElse"],["loadingUserPackageTemplate",""],["class","col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[1,"col-lg-4","col-sm-6"],[1,"price-item"],[1,"price-item-inner"],[1,"price-top"],[1,"text-white"],[1,"price-bottom"],[1,"default-button",3,"click"]],template:function(a,r){if(1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Choose Our Packages"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5),e.YNc(8,H,2,1,"ng-container",6),e.ALo(9,"async"),e.YNc(10,x,3,0,"ng-template",null,7,e.W1O),e.qZA()()()()()),2&a){const c=e.MAs(11);e.xp6(8),e.Q6J("ngIf",e.lcZ(9,2,r.userPackages$))("ngIfElse",c)}},dependencies:[g.sg,g.O5,g.Ov],styles:[".card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder}.pricing-section[_ngcontent-%COMP%]{background:rgb(93,35,35);background:linear-gradient(59deg,rgb(93,35,35) 3%,rgb(48,44,130) 64%)}"]}),t})();var I=o(5698),O=o(3900),N=o(4004),M=o(262);const k=(0,n.PH)("[UserHistory Page] User History Save All",(0,n.Ky)());var L=o(1261),Y=o(529);let E=(()=>{class t{constructor(a,r){this.http=a,this.cookieService=r,this.baseUrl=L.N.apiUrl}getAllPackagesForUser(){const a=(0,p.l)(this.cookieService.get("user"));return this.http.post(this.baseUrl+"Package",a)}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(Y.eN),e.LFG(f.N))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const z=[{path:"",component:y,canActivate:[C.a],children:[{path:"packages",component:T,resolve:{userPackage:(()=>{class t{constructor(a,r){this.userPackageHttpService=a,this.store=r}resolve(a,r){return this.store.select(S).pipe((0,I.q)(1),(0,O.w)(c=>c?(0,u.of)(!0):this.userPackageHttpService.getAllPackagesForUser().pipe((0,N.U)(i=>(this.store.dispatch(k({userPackages:i})),!0)),(0,M.K)(i=>(console.error("Error loading user packages:",i),(0,u.of)(!1))))))}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(E),e.LFG(n.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]}];let G=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(z),l.Bz]}),t})();var $=o(294);const J=(0,n.Lq)({userPackages:void 0,isLoaded:!1},(0,n.on)(k,(t,s)=>({...t,userPackages:s.userPackages,isLoaded:!0})));let w=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,G,$.I,n.Aw.forFeature("userPackages",J)]}),t})()}}]);