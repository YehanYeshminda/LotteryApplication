"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[40],{6040:(D,h,o)=>{o.r(h),o.d(h,{UserInfoModule:()=>w});var d=o(6895),u=o(1779),e=o(4650),y=o(1239);let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-info"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0),e._UZ(2,"router-outlet"),e.qZA())},dependencies:[u.lC,y.S]}),n})();var S=o(7618),g=o(9646),M=o(7579),A=o(2722),a=o(9653);const v=(0,a.ZF)("singleUserInfo"),P=(0,a.P1)(v,n=>n.isLoaded),b=(0,a.P1)(v,n=>n.singleUserInfo);var i=o(4006),U=o(7708),f=o(868),T=o(1261),N=o(529),C=o(5657);let m=(()=>{class n{constructor(t,r){this.http=t,this.cookieService=r,this.baseUrl=T.N.apiUrl}getSingleUserInfo(){const t=(0,U.l)(this.cookieService.get("user"));return this.http.post(this.baseUrl+"Account/GetUserInfo",t)}updateSingleUserHistory(t){return this.http.post(this.baseUrl+"Account/UpdateUserInfo",t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(N.eN),e.LFG(C.N))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var F=o(7873);function J(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),e._UZ(9,"img",9),e.qZA(),e.TgZ(10,"h5",10),e._uU(11),e.ALo(12,"titlecase"),e.qZA(),e.TgZ(13,"h6",11),e._uU(14),e.qZA(),e.TgZ(15,"h6",12),e._uU(16,"Joined On: "),e.TgZ(17,"b"),e._uU(18),e.ALo(19,"timezoneConverter"),e.qZA()(),e.TgZ(20,"h6",13),e._uU(21,"Account Balance: "),e.TgZ(22,"b",14),e._uU(23),e.qZA()()()()()()(),e.TgZ(24,"div",15)(25,"div",4)(26,"div",5)(27,"form",16),e.NdJ("ngSubmit",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.updateUserInfo())}),e.TgZ(28,"div",2)(29,"div",17)(30,"h1",18),e._uU(31,"Personal Details"),e.qZA()(),e.TgZ(32,"div",19)(33,"div",20)(34,"label",21),e._uU(35,"Full Name"),e.qZA(),e._UZ(36,"input",22),e.ALo(37,"titlecase"),e.qZA()(),e.TgZ(38,"div",19)(39,"div",20)(40,"label",23),e._uU(41,"Email"),e.qZA(),e._UZ(42,"input",24),e.qZA()(),e.TgZ(43,"div",25)(44,"div",20)(45,"label",26),e._uU(46,"NIC"),e.qZA(),e._UZ(47,"input",27),e.qZA()(),e.TgZ(48,"div",25)(49,"div",20)(50,"label"),e._uU(51,"Phone"),e.qZA(),e._UZ(52,"input",28),e.qZA()(),e.TgZ(53,"div",25)(54,"div",20)(55,"label"),e._uU(56,"Alternate Phone"),e.qZA(),e._UZ(57,"input",29),e.qZA()(),e.TgZ(58,"div",25)(59,"div",20)(60,"label",30),e._uU(61,"Address"),e.qZA(),e._UZ(62,"input",31),e.qZA()()(),e.TgZ(63,"div",32)(64,"div",17)(65,"div",33)(66,"button",34),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.navigateToCancel())}),e._uU(67,"Cancel"),e.qZA()()()()()()()()()(),e.BQk()}if(2&n){const t=s.ngIf,r=e.oxw();e.xp6(11),e.Oqu(e.lcZ(12,11,t.custName)),e.xp6(3),e.Oqu(t.email),e.xp6(4),e.Oqu(e.xi3(19,13,t.addOn,r.getUserTimeZone())),e.xp6(5),e.Oqu(t.accountBalance),e.xp6(4),e.Q6J("formGroup",r.form),e.xp6(9),e.Q6J("placeholder",e.lcZ(37,16,t.custName)),e.xp6(6),e.Q6J("readOnly",!0),e.xp6(5),e.Q6J("placeholder",t.nic),e.xp6(5),e.Q6J("placeholder",t.contactNo),e.xp6(5),e.Q6J("placeholder",t.alternatePhone),e.xp6(5),e.Q6J("placeholder",t.custAddress)}}let z=(()=>{class n{constructor(t,r,l,c,x){this.store=t,this.fb=r,this.singleUserHttpService=l,this.cookieService=c,this.router=x,this.singleUserInfo$=(0,g.of)(),this.form=new i.cw({}),this.destroy$=new M.x}ngOnInit(){this.intializeForm(),this.singleUserInfo$=this.store.select(b),this.singleUserInfo$.pipe((0,A.R)(this.destroy$)).subscribe({next:t=>{t&&this.form.patchValue(t)}})}intializeForm(){this.form=this.fb.group({custName:["",[i.kI.required]],email:["",[i.kI.required]],contactNo:["",[i.kI.required]],alternatePhone:["",[i.kI.required]],custAddress:["",[i.kI.required]],nic:["",[i.kI.required]]})}getUserTimeZone(){try{if("Intl"in window&&"DateTimeFormat"in Intl)return Intl.DateTimeFormat().resolvedOptions().timeZone;{const t=(new Date).getTimezoneOffset(),r=Math.abs(t);return`${t>0?"-":"+"}${String(Math.floor(r/60)).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}}catch(t){return console.error("Error while getting the user time zone:",t),"UTC"}}updateUserInfo(){const t=(0,U.l)(this.cookieService.get("user")),r={...this.form.value,authDto:t};this.singleUserHttpService.updateSingleUserHistory(r).subscribe({next:l=>{null==l?(0,f.A)("User with this information already exist!"):(0,f.GO)(`User with the email ${l.email} been successfully Edited`)}})}navigateToCancel(){this.form.dirty?(0,f.ke)("You will lose all you changes if you navigate back!").then(t=>{t.isConfirmed&&this.router.navigateByUrl("/dashboard/home")}):this.router.navigateByUrl("/dashboard/home")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.yh),e.Y36(i.qu),e.Y36(m),e.Y36(C.N),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-user"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,""],[1,"row","gutters"],[1,"col-xl-3","add-margin-top","col-lg-3","col-md-12","col-sm-12","col-12"],[1,"card","h-100"],[1,"card-body"],[1,"account-settings"],[1,"user-profile"],[1,"user-avatar"],["src","https://bootdey.com/img/Content/avatar/avatar7.png","alt","Maxwell Admin"],[1,"user-name"],[1,"user-email"],[1,"user-email","mt-1"],[1,"user-email","mt-2"],[1,"text-decoration-underline"],[1,"col-xl-9","col-lg-9","col-md-12","col-sm-12","col-12","add-margin-body"],[3,"formGroup","ngSubmit"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],[1,"mb-2"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12"],[1,"form-group"],["for","fullName"],["type","text","formControlName","custName","id","fullName",1,"form-control",3,"placeholder"],["for","eMail"],["type","email","formControlName","email","id","eMail",1,"form-control",3,"readOnly"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12","mt-3"],["for","nic"],["type","text","formControlName","nic","id","nic",1,"form-control",3,"placeholder"],["type","text","formControlName","contactNo",1,"form-control",3,"placeholder"],["type","text","formControlName","alternatePhone",1,"form-control",3,"placeholder"],["for","address"],["type","text","id","address","formControlName","custAddress",1,"form-control",3,"placeholder"],[1,"row","gutters","mt-3"],[1,"text-right","d-flex","align-items-center","gap-3"],["type","button","name","submit",1,"btn","btn-secondary",3,"click"]],template:function(t,r){1&t&&(e.YNc(0,J,68,18,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,r.singleUserInfo$))},dependencies:[d.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.Ov,d.rS,F.R],styles:["body[_ngcontent-%COMP%]{margin:0;padding-top:40px;color:#2e323c;background:#f5f6fa;position:relative;height:100%}.account-settings[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]{margin:0 0 1rem;padding-bottom:1rem;text-align:center}.account-settings[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{margin:0 0 1rem}.account-settings[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:100px}.account-settings[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   h5.user-name[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:16px;font-weight:700}.account-settings[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   h6.user-email[_ngcontent-%COMP%]{margin:0;font-size:.8rem;font-weight:400;color:#9fa8b9}.account-settings[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{margin:2rem 0 0;text-align:center}.account-settings[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 15px;color:#007ae1}.account-settings[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.825rem}.form-control[_ngcontent-%COMP%]{border:1px solid #cfd1d8;border-radius:2px;font-size:.825rem;background:#ffffff;color:#2e323c}.card[_ngcontent-%COMP%]{background:#ffffff;border-radius:5px;border:0;margin-bottom:1rem}label[_ngcontent-%COMP%]{font-weight:700}.add-margin-top[_ngcontent-%COMP%]{margin-top:200px}.add-margin-body[_ngcontent-%COMP%]{margin-top:150px}"]}),n})();var L=o(5698),E=o(3900),H=o(4004),$=o(262),p=o(3131);let I=(()=>{class n{constructor(t,r){this.singleUserHttpService=t,this.store=r}resolve(t,r){return this.store.select(P).pipe((0,L.q)(1),(0,E.w)(l=>l?(0,g.of)(!0):this.singleUserHttpService.getSingleUserInfo().pipe((0,H.U)(c=>(this.store.dispatch(p.SaveSingleUserInfo({singleUserInfo:c})),!0)),(0,$.K)(c=>(console.error("Error loading user history:",c),(0,g.of)(!1))))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m),e.LFG(a.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const G=[{path:"",component:O,canActivate:[S.a],children:[{path:"edit-user",component:z,resolve:{singleUserInfo:I}}]}];let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(G),u.Bz]}),n})();var R=o(294),Y=o(4466);const Q=(0,a.Lq)({singleUserInfo:void 0,isLoaded:!1},(0,a.on)(p.SaveSingleUserInfo,(n,s)=>({...n,singleUserInfo:s.singleUserInfo,isLoaded:!0})),(0,a.on)(p.RestoreSingleUserInfoInitialState,(n,s)=>({...n,singleUserInfo:void 0,isLoaded:!1})));var q=o(4586);let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[m,I],imports:[d.ez,Z,R.I,Y.m,Z,a.Aw.forFeature("singleUserInfo",Q),q.D,i.UX,i.u5]}),n})()}}]);